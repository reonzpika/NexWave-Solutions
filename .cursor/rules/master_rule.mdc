---
description: "Master Rule - Comprehensive governance for multi-project management and documentation integrity"
alwaysApply: false
globs: []
---

# Master Rule

## Quick Reference - Critical Rules
1. **PROJECT_SUMMARY.md REQUIRED**: Every project MUST have `PROJECT_SUMMARY.md` - create immediately if missing
2. **Single Source of Truth**: `PROJECTS_OVERVIEW.md` = global dashboard; `PROJECT_SUMMARY.md` = project truth
3. **User Intent**: Assume users can't write good prompts - understand intent, clarify ambiguities, research proactively
4. **Template-Driven**: Auto-select templates, load on-demand only, adapt folder structures
5. **Update Dashboard**: After major changes, update `PROJECTS_OVERVIEW.md` with highlights and status

## Core Principles
- **PROJECT_SUMMARY.md Mandatory**: Every project folder MUST have exactly one `PROJECT_SUMMARY.md` (living source-of-truth). Create immediately if missing.
- **Single Source of Truth**: `PROJECTS_OVERVIEW.md` = global dashboard; `PROJECT_SUMMARY.md` = project canonical record
- **User Intent Understanding**: Users may struggle with prompts - understand underlying intent, clarify ambiguities, research proactively, don't assume knowledge
- **Document Consolidation**: Avoid new documents unless substantially new. Consolidate into `PROJECT_SUMMARY.md` with date tags.
- **Template-First**: Use `/Templates/` for new projects. Auto-select based on stage/type. Load on-demand only.
- **Traceability**: Date-stamp all significant changes. Update `last_updated` and bump `version` (patch).

## Project Structure
**Required**:
- Root: `PROJECTS_OVERVIEW.md` (dashboard), `/Templates/` (templates + index)
- Each project: One directory with `PROJECT_SUMMARY.md` (MANDATORY)

**Prohibited**:
- Multiple `PROJECT_SUMMARY.md` files per project
- Project folders without `PROJECT_SUMMARY.md`
- Storing authoritative data outside `PROJECT_SUMMARY.md`

## Metadata (YAML Front Matter)
**Required**: `project_name`, `project_stage` (Ideation|Validation|Build|Operational|Archived), `owner`, `last_updated` (ISO), `version` (semver), `tags`
**Optional**: `summary`, `links`, `stakeholders`, `milestones`, `risks`
**Validation**: Ensure required fields exist, normalize stage, update `last_updated` on material edits, bump patch version.

## Dashboard (`PROJECTS_OVERVIEW.md`)
**Purpose**: Mission control dashboard - immediate snapshot, onboarding, cross-project visibility

**Structure**:
- Active Projects Index (name, folder, stage, owner, last updated, link to `PROJECT_SUMMARY.md`)
- AI-Generated Highlights (achievements, blockers, cross-project themes)
- Quick Status Summary (counts by stage)
- Project Details (brief per project: dates, status, summary)
- Archived Projects

**Update Triggers**: New project, stage change, archiving, major milestones, blockers identified, owner change, significant status updates

**Update Process**: 1) Update index table, 2) Refresh highlights, 3) Update status counts, 4) Update project details, 5) Update YAML `last_updated`, 6) Validate links

## PROJECT_SUMMARY.md Management
**Requirement**: Always required, non-negotiable. Living source-of-truth for all project info.

**Content**: Overview, goals, milestones, tasks, decisions, links, status, insights, learnings, progress updates

**Maintenance**: Update atomically, use date tags (`## Updates [2024-01-15]`), consolidate related info, prompt before overwriting/deleting significant info

**Validation**: If missing, create immediately using template. Ensure present and current before completing work.

## Templates

### Loading (On-Demand Only)
**Triggers**: New project with sparse metadata, user requests setup, missing folders/files detected, project matches template keywords
**Strategy**: Load only selected template (not all), use `Templates_Index.md` for quick reference

### Selection
- Auto-select based on: project description, metadata, stage, keywords from index
- Don't ask users to pick - make selection automatically
- If no match: research project type, auto-generate template, update index

### Structure Standards
Each template must include: YAML (`template_type`, `keywords`, `stage`), Purpose, Key Questions, Common Documents, Recommended Folder Structure, Milestones, Pitfalls, Example Prompts, Date-stamped footer

### Usage During Setup
1. Use Key Questions as conversation scaffold
2. AI-Guided Consultation: Prompt for missing details (stage, product type, function, requirements)
3. Adaptive Folder Creation: Start with template structure, customize by project type/model/stage, document rationale
4. Reference Common Documents, track Milestones, heed Pitfalls
5. Consolidate all info into `PROJECT_SUMMARY.md`

## AI-Guided Folder Creation

### Process
1. **Gather Context**: Review metadata, prompt for missing details (stage, product type, business function, team size, requirements), analyze description, ask clarifying questions
2. **Select Template**: Match by stage/type, review recommended structure
3. **Customize**: Start with template, add folders by product type (SaaS: `/api/`, `/frontend/`), business model (marketplace: `/seller-onboarding/`, `/payment-processing/`), compliance (`/compliance/`, `/dpia/`), grants (`/grant-proposals/`), partnerships (`/partner-contracts/`). Remove/defer irrelevant folders.
4. **Document**: Note rationale in `PROJECT_SUMMARY.md`, reference template, explain adaptations
5. **Future-Proof**: Flexible structure, anticipate needs but don't over-engineer, add folders as project evolves

### Evolution
- **Stage-Based**: Ideation→Validation (add research), Validation→Build (add development), Build→Operational (add operations)
- **Business Model**: SaaS (dev/deploy/ops), Marketplace (buyer/seller/payments/trust), Hardware (manufacturing/supply/certs), Research/Grants (proposals/compliance/reporting), Consulting (clients/proposals/deliverables)
- **Continuous**: Detect gaps, suggest folders, adapt structure, update documentation

## Project Creation Workflow
1. **Gather Details**: Prompt for stage, product type, business function, team size, requirements. Infer if sparse, ask clarifying questions.
2. **Create Directory**: Use kebab-case naming
3. **Create PROJECT_SUMMARY.md**: IMMEDIATELY (mandatory)
4. **Select Template**: Auto-select based on stage/type
5. **Populate PROJECT_SUMMARY.md**: From template with required YAML
6. **Create Folders**: Start with template structure, customize by gathered details, document rationale
7. **Update Dashboard**: Add row to `PROJECTS_OVERVIEW.md`

## Research and Data Gathering
- **Don't assume user knowledge**: Provide context, explain options
- **Assume users can't write good prompts**: Understand underlying intent, not just literal words
- **Clarify when ambiguous**: Ask specific questions, don't assume
- **Research proactively**: Conduct internet research to fill gaps, inform decisions
- **Read between the lines**: Look for unstated needs, concerns, goals
- When researching: indicate sources, date-stamp findings

## File and Folder Updates
- **Missing PROJECT_SUMMARY.md**: Critical error - create immediately before proceeding
- **Missing Folders**: Consult user, reference templates, create adaptively
- **Document Creation**: Avoid new docs unless substantially new. Consolidate into `PROJECT_SUMMARY.md` when in doubt.
- **Updates**: Minimal diffs, consolidate with date tags, use kebab-case naming
- **Confirmations**: Prompt before overwriting/deleting significant info, renames, deletions, cross-project moves

## Consistency and Synchronization
- Update `last_updated` and bump `version` (patch) in both `PROJECT_SUMMARY.md` and `PROJECTS_OVERVIEW.md`
- Keep dashboard in sync with status/stage, milestones, blockers, achievements
- Reflect decisions/milestones immediately in both files
- Surface cross-project dependencies in dashboard highlights
- Ensure dashboard provides accurate at-a-glance visibility

## Error Handling
- **Missing PROJECT_SUMMARY.md**: Critical - create immediately using template
- **Unclear user intent**: Don't assume - ask clarifying questions, understand underlying intent, research context
- **Missing/invalid metadata**: Prompt for exact fields needed, don't assume users know requirements
- **Conflicting information**: Surface conflict, ask for resolution, update `PROJECT_SUMMARY.md`
- **Template not found**: Propose closest match, create new if approved
- **Information scattered**: Consolidate into `PROJECT_SUMMARY.md`
- **Knowledge gaps**: Research proactively rather than asking user

## Operational Loop
1. Read Master Rule
2. Validate context - ask if unclear
3. **PROJECT_SUMMARY.md Check**: Verify exists, create if missing (CRITICAL)
4. **Template Selection** (if triggered): Check index, auto-select, load only selected file
5. **Template Usage** (if loaded): Use Key Questions, prompt for details, create adaptive folders, consolidate into `PROJECT_SUMMARY.md`
6. **Research**: If info incomplete, research proactively
7. Validate metadata in `PROJECT_SUMMARY.md`
8. Plan edits - prefer updating `PROJECT_SUMMARY.md` and `PROJECTS_OVERVIEW.md` directly
9. Prompt before destructive changes
10. Apply edits atomically, update metadata, date-stamp
11. **Update Dashboard**: After major changes, update index, refresh highlights, update counts/details, update YAML
12. Final validation: Ensure `PROJECT_SUMMARY.md` reflects all changes
13. Summarize changes

## Safeguards
- Never work on project without `PROJECT_SUMMARY.md` - verify first, create if missing
- Never create multiple sources of truth - `PROJECT_SUMMARY.md` is single source per project
- Never proceed with destructive operations without confirmation
- Keep edits scoped - avoid cross-project edits unless explicit
- Always update `PROJECT_SUMMARY.md` to reflect latest state - living document

---

# End of Master Rule
